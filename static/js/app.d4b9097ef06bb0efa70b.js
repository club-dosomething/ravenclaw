webpackJsonp([1],{155:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.style?n("div",{ref:"lavContainer",style:t.style,on:{click:function(e){return t.$emit("click")},mousedown:function(e){return t.$emit("down")},mouseup:function(e){return t.$emit("up")}}}):t._e()},i=[],o={render:a,staticRenderFns:i};e.a=o},156:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{fadeout:!t.isLoading}},[n("lottie-view",{attrs:{path:"static/4-dots.json"}})],1)},i=[],o={render:a,staticRenderFns:i};e.a=o},157:function(t,e,n){"use strict";var a=n(66),i=n(200),o=n(10),r=o(a.a,i.a,!1,null,null,null);e.a=r.exports},158:function(t,e,n){"use strict";function a(t){n(159)}var i=n(67),o=n(199),r=n(10),s=a,c=r(i.a,o.a,!1,s,"data-v-cf82cb5c",null);e.a=c.exports},159:function(t,e){},160:function(t,e,n){"use strict";function a(t){n(161)}var i=n(68),o=n(198),r=n(10),s=a,c=r(i.a,o.a,!1,s,"data-v-4374e325",null);e.a=c.exports},161:function(t,e){},188:function(t,e,n){"use strict";function a(){var t=[{x:0,y:0},{x:p,y:0},{x:p,y:h},{x:0,y:h}];d.clear(),d.lineStyle(2,16711680),d.drawDashedPolygon(t,0,0,0,10,5,0),d.x=u.view.width/2-p/2,d.y=u.view.height/2-h/2}function i(t){u=t,d=new l.b,u.stage.addChild(d),a();var e=new l.b;e.interactive=!0,e.buttonMode=!0,e.x=0,e.y=0,e.alpha=0,e.beginFill(0),e.drawRect(0,0,u.view.width,u.view.height),e.endFill(),e.on("pointerdown",o).on("pointerup",r).on("pointerupoutside",r).on("pointermove",s),u.stage.addChild(e)}function o(t){f=t.data,g=f.getLocalPosition(this.parent),v={width:p,height:h}}function r(){f=null}function s(){if(f){var t=f.getLocalPosition(this.parent),e=t.x-g.x,n=t.y-g.y;p=Math.min(Math.max(v.width+e,100),u.view.width),h=Math.min(Math.max(v.height+n,100),u.view.height),a()}}function c(){return{width:p,height:h}}var l=n(38),u=(n(189),null),d=null,p=100,h=100,v=null,g=null,f=null;e.a={init:i,size:c}},189:function(t,e,n){"use strict";n(38).b.prototype.drawDashedPolygon=function(t,e,n,a,i,o,r){var s,c,l,u,d,p=0,h=0;if(r>0){var v=(i+o)*r;v<i?p=i-v:h=o-(v-i)}var g=[];for(s=0;s<t.length;s++){var f={x:t[s].x,y:t[s].y},m=Math.cos(a),w=Math.sin(a);u=f.x,d=f.y,f.x=u*m-d*w,f.y=u*w+d*m,g.push(f)}for(s=0;s<g.length;s++){c=g[s],l=s===g.length-1?g[0]:g[s+1],u=l.x-c.x,d=l.y-c.y;var y=Math.sqrt(u*u+d*d),x={x:u/y,y:d/y},k=0;for(this.moveTo(e+c.x+h*x.x,n+c.y+h*x.y);k<=y;)k+=h,k+=p>0?p:i,k>y?(p=k-y,k=y):p=0,this.lineTo(e+c.x+k*x.x,n+c.y+k*x.y),k+=o,k>y&&0===p?h=k-y:(h=0,this.moveTo(e+c.x+k*x.x,n+c.y+k*x.y))}}},190:function(t,e,n){"use strict";function a(t,e,n,a,i,o,r){console.log("x: "+e+", y: "+n+", width: "+a+", height: "+i);var s=a,c=i;a>i?(s=o,c=i/a*o):(c=r,s=a/i*r);var l=new OffscreenCanvas(s,c),u=l.getContext("2d");return u.clearRect(0,0,l.width,l.height),u.drawImage(t,e,n,a,i,0,0,s,c),{blob:l.convertToBlob({type:"image/png"}),bitmap:l.transferToImageBitmap()}}function i(t){return new r.a(function(e,n){var a=new FileReader;a.onload=function(){e(a.result)},a.onerror=n,a.readAsDataURL(t)})}var o=n(44),r=n.n(o);e.a={crop:a,blobToUrl:i}},191:function(t,e){},192:function(t,e){},196:function(t,e,n){"use strict";function a(){return o.a.get("https://fierce-lake-44609.herokuapp.com/contents").then(function(t){return t.data})}var i=n(28),o=n.n(i);e.a={getContentsAsync:a}},197:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("button",{class:["saveBtn",{buttonProgressed:t.progressed}],on:{click:t.onClick}},[t._v("Save")]),t._v(" "),n("img",{attrs:{id:"original-image"}}),t._v(" "),n("div",{attrs:{id:"physics-world"}}),t._v(" "),n("div",{attrs:{id:"svg-wrapper"}}),t._v(" "),n("div",{ref:"library",class:["slide-page",t.libraryOpened?"slide-open":"slide-close"],on:{click:function(e){t.libraryOpened=!1}}},[n("ul",[0===t.contents.length?n("lottie-view",{attrs:{width:"100px",height:"100px",speed:1,loop:!0,autoPlay:!0,path:"static/progress-dots-blue.json"}}):t._e(),t._v(" "),t._l(t.contents,function(e,a){return n("li",{key:a,staticClass:"contents-item",on:{click:function(e){return t.mapit(a,e)}}},[n("svg",{attrs:{width:"200",height:"200",xmlns:"http://www.w3.org/2000/svg",viewbox:"0 0 100 100"}},[n("defs",{domProps:{innerHTML:t._s(e.contents)}}),t._v(" "),n("circle",{attrs:{cx:"100",cy:"100",r:"100",fill:"url(#patternx"+a+")"}})])])})],2)])])},i=[],o={render:a,staticRenderFns:i};e.a=o},198:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("video",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],ref:"camera",staticClass:"camera-surface",attrs:{autoplay:""}}),t._v(" "),n("div",{staticClass:"canvas-wrapper"},[n("canvas",{ref:"pixiCanvas"}),t._v(" "),n("div",{staticClass:"drag-handle",attrs:{"data-corner":"0"}}),t._v(" "),n("div",{staticClass:"drag-handle",attrs:{"data-corner":"1"}}),t._v(" "),n("div",{staticClass:"drag-handle",attrs:{"data-corner":"2"}}),t._v(" "),n("div",{staticClass:"drag-handle",attrs:{"data-corner":"3"}}),t._v(" "),n("div",{staticClass:"drag-handle",attrs:{"data-corner":"4"}}),t._v(" "),n("button",{class:["okBtn",{buttonProgressed:t.isPhotoTaken}],on:{click:t.onClick}})])])},i=[],o={render:a,staticRenderFns:i};e.a=o},199:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",{on:{toggleMenu:function(e){t.menuIsOpen=!t.menuIsOpen}}},[n("v-ons-toolbar",{staticClass:"home-toolbar"},[n("div",{staticClass:"left"},[n("v-ons-toolbar-button",{on:{click:function(e){return t.$emit("toggleMenu")}}},[n("v-ons-icon",{attrs:{icon:"ion-navicon, material:md-menu"}})],1)],1),t._v(" "),n("div",{staticClass:"center"},[t._v(t._s(t.msg))])]),t._v(" "),n("div",{staticClass:"guide-text"},[t._v(" Connect your Projector to Mobile ")]),t._v(" "),n("lottie-view",{attrs:{width:"min(100vw, 100vh)",height:"min(100vw, 100vh)",path:"static/yoga-developer.json"}}),t._v(" "),n("v-ons-button",{staticClass:"guide-ok",attrs:{modifier:"large"},on:{click:function(e){return t.$emit("replace-page",t.canvasPage)}}},[t._v("Ok, I connected.")]),t._v(" "),n("v-ons-button",{staticClass:"guide-edit",attrs:{modifier:"large"},on:{click:function(e){return t.$emit("replace-page",t.editPage)}}},[t._v("Go Edit.")])],1)},i=[],o={render:a,staticRenderFns:i};e.a=o},200:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-ons-navigator",{attrs:{swipeable:"","page-stack":t.pageStack},on:{"push-page":function(e){return t.pageStack.push(e)},"replace-page":function(e){t.pageStack.pop(),t.pageStack.push(e)},"home-page":function(e){return t.goHome()}}})},i=[],o={render:a,staticRenderFns:i};e.a=o},201:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?n("splash",{attrs:{isLoading:t.isLoading}}):n("navi-page")},i=[],o={render:a,staticRenderFns:i};e.a=o},21:function(t,e,n){"use strict";var a=n(43),i=n(155),o=n(10),r=o(a.a,i.a,!1,null,null,null);e.a=r.exports},41:function(t,e,n){"use strict";var a=n(96),i=n(157);e.a={name:"app",data:function(){return{isLoading:!0}},mounted:function(){var t=this;setTimeout(function(){t.isLoading=!1},3e3)},components:{Splash:a.a,NaviPage:i.a}}},42:function(t,e,n){"use strict";var a=n(21);e.a={name:"splash",props:["isLoading"],components:{LottieView:a.a}}},43:function(t,e,n){"use strict";var a=n(98),i=n.n(a),o=n(101),r=n.n(o),s=n(137),c=n.n(s),l=n(28),u=n.n(l);e.a={props:{path:{required:!0},speed:{type:Number,required:!1,default:1},width:{type:Number|String,required:!1,default:-1},height:{type:Number|String,required:!1,default:-1},loop:{type:Boolean,required:!1,default:!0},autoPlay:{type:Boolean,required:!1,default:!0},loopDelayMin:{type:Number,required:!1,default:0},loopDelayMax:{type:Number,required:!1,default:0}},data:function(){return{name:"lottie-view",rendererSettings:{scaleMode:"centerCrop",clearCanvas:!0,progressiveLoad:!1,hideOnTransparent:!0},anim:null,style:null}},methods:{getRandomInt:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t},executeLoop:function(){var t=this;this.anim.play(),setTimeout(function(){t.anim.stop(),t.executeLoop()},this.getRandomInt(this.loopDelayMin,0===this.loopDelayMax?this.loopDelayMin:this.loopDelayMax))},sizeText:function(t){return isNaN(t)?t:t+"px"},init:function(){var t=this;return r()(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.style={width:-1!==t.width?t.sizeText(t.width):"100%",height:-1!==t.height?t.sizeText(t.height):"100%",overflow:"hidden",margin:"0 auto"},e.next=3,u.a.get(t.path).then(function(t){return t.data});case 3:n=e.sent,t.anim&&t.anim.destroy(),t.anim=c.a.loadAnimation({container:t.$refs.lavContainer,renderer:"svg",loop:t.loop,autoplay:t.autoPlay,animationData:n,rendererSettings:t.rendererSettings}),t.anim.addEventListener("complete",function(){t.$emit("complete",t.anim)}),t.$emit("AnimControl",t.anim),t.anim.setSpeed(t.speed),t.loopDelayMin>0&&(t.anim.loop=!1,t.anim.autoplay=!1,t.executeLoop());case 10:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.init()}}},66:function(t,e,n){"use strict";var a=n(158);e.a={name:"navigation",data:function(){return{pageStack:[a.a]}},methods:{goHome:function(){this.pageStack.pop(),this.pageStack.push(a.a)}},components:{HomePage:a.a}}},67:function(t,e,n){"use strict";var a=n(21),i=n(160),o=n(82);e.a={name:"home",data:function(){return{menuIsOpen:!1,msg:"This is LightWarp!",canvasPage:i.a,editPage:o.a}},methods:{goTo:function(t){window.open(t,"_blank")}},components:{CanvasPage:i.a,LottieView:a.a,EditPage:o.a}}},68:function(t,e,n){"use strict";var a=n(38),i=n(188),o=n(21),r=n(190),s=n(28),c=n.n(s),l=n(82);e.a={name:"CanvasPage",data:function(){return{app:null,isLoading:!0,isPhotoTaken:!1,imageCapture:null}},mounted:function(){var t=this;navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment",width:screen.width,height:screen.height}}).then(function(e){t.isLoading=!1,t.$refs.camera.srcObject=e;var n=e.getVideoTracks()[0];t.imageCapture=new window.ImageCapture(n)}).catch(function(e){t.isLoading=!1,console.error("Platform Webview does not support getUserMedia video."),console.error(e)}),this.app=new a.a({backgroundAlpha:0,antialias:!0,view:this.$refs.pixiCanvas}),this.app.renderer.view.className="canvas-surface",this.app.renderer.view.style.position="fixed",this.app.renderer.view.style.width="100%",this.app.renderer.view.style.height="100%",this.app.renderer.view.style.zIndex="10",this.app.renderer.autoResize=!0,this.app.renderer.resize(window.innerWidth,window.innerHeight),i.a.init(this.app)},methods:{progressStart:function(){},progressEnd:function(){},onClick:function(){console.log("onClick"),this.isPhotoTaken||(this.isPhotoTaken=!this.isPhotoTaken,this.takePhoto())},goEdit:function(){this.$emit("replace-page",l.a)},onComplete:function(){console.log("onComplete"),this.isPhotoTaken=!this.isPhotoTaken,this.takePhoto()},takePhoto:function(){var t=this;if(this.isLoading)return void console.log("camera is not ready");this.imageCapture.takePhoto().then(function(t){return console.log(t),createImageBitmap(t)}).then(function(e){var n=i.a.size(),a=screen.orientation.angle/90%2==1?e.width/t.app.view.width:e.height/t.app.view.height,o=n.width*a,s=n.height*a;return r.a.crop(e,Math.max(0,(e.width-o)/2),Math.max(0,(e.height-s)/2),o,s,300,300).blob}).then(function(t){r.a.blobToUrl(t).then(function(t){return localStorage.setItem("raster",t)});var e=new FormData;return e.append("hierarchial","cutout"),e.append("filter_speckle",4),e.append("color_precision",6),e.append("layer_difference",16),e.append("file",t),c.a.post("https://fierce-lake-44609.herokuapp.com/vision/",e,{header:{"Content-Type":"multipart/form-data"}})}).then(function(e){localStorage.setItem("vectorized",e.data),t.progressEnd(),t.goEdit()}).catch(function(e){console.log("error..."),console.log(e),t.progressEnd()})}},components:{LottieView:o.a,EditPage:l.a}}},82:function(t,e,n){"use strict";function a(t){n(191),n(192)}var i=n(83),o=n(197),r=n(10),s=a,c=r(i.a,o.a,!1,s,"data-v-8ed6c510",null);e.a=c.exports},83:function(t,e,n){"use strict";var a=n(193),i=n.n(a),o=n(195),r=n.n(o),s=n(196),c=n(21),l=n(28),u=n.n(l);e.a={name:"EditPage",data:function(){return{libraryOpened:!1,contents:[],snap:null,lastClicked:null,progressed:!1}},mounted:function(){var t=this,e=localStorage.getItem("raster");document.querySelector("#original-image").src=e;var n=localStorage.getItem("vectorized"),a=document.querySelector("#svg-wrapper");a.innerHTML=n;var o=a.querySelector("svg");this.snap=i()(o);var c=this.snap.getBBox();this.snap.attr({class:"vectorsurface",viewBox:"0, 0, "+c.width+", "+c.height,preserveAspectRatio:"xMidYMid meet"});var l=document.querySelector("#physics-world"),u=r.a.Engine.create(),d=r.a.Render.create({element:document.getElementById("physics-world"),engine:u,options:{width:l.clientWidth,height:l.clientHeight,background:"transparent",wireframeBackground:"rgba(0, 0, 0, 0.2)"}});r.a.Render.run(d);var p=r.a.Runner.create();r.a.Runner.run(p,u),this.snap.selectAll("path").forEach(function(e){e.click(function(e){t.libraryOpened=!t.libraryOpened,console.log(e),t.lastClicked=e.target})}),s.a.getContentsAsync().then(function(e){for(var n in e){var a=e[n].contents.trim();a.startsWith("<pattern")&&(e[n].contents=a.replace("<pattern",'<pattern id="patternx'+n+'"'))}console.log(e),t.contents=e})},methods:{mapit:function(t,e){var n=this.contents[t];if("svg-pattern"===n.type){var a=i.a.parse(n.contents);this.snap.select("defs").add(a),this.lastClicked&&(this.lastClicked.setAttribute("fill","url(#patternx"+t+")"),this.lastClicked.setAttribute("fill-opacity","1"))}},onClick:function(){console.log("save..."),console.log(this.snap),u.a.post("https://fierce-lake-44609.herokuapp.com/screen/1234",{data:this.snap.outerSVG()})}},components:{LottieView:c.a}}},85:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(86),i=(n.n(a),n(88)),o=(n.n(i),n(89)),r=(n.n(o),n(90)),s=n(92),c=n.n(s),l=n(94),u=n(84),d=n(202),p=n(203);screen.orientation.lock("landscape"),u.c.add(d.a),r.a.component("font-awesome-icon",p.a),r.a.config.productionTip=!1,r.a.use(c.a),new r.a({el:"#app",template:"<App/>",components:{App:l.a}})},86:function(t,e){},88:function(t,e){},89:function(t,e){},94:function(t,e,n){"use strict";function a(t){n(95)}var i=n(41),o=n(201),r=n(10),s=a,c=r(i.a,o.a,!1,s,"data-v-4d1de804",null);e.a=c.exports},95:function(t,e){},96:function(t,e,n){"use strict";function a(t){n(97)}var i=n(42),o=n(156),r=n(10),s=a,c=r(i.a,o.a,!1,s,"data-v-6915d949",null);e.a=c.exports},97:function(t,e){}},[85]);
//# sourceMappingURL=app.d4b9097ef06bb0efa70b.js.map